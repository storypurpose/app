<!-- <app-recently-viewed></app-recently-viewed> -->
<div class="main-container">
    <div class="body-container">
        <as-split direction="horizontal">
            <as-split-area size="20" class="border-right">
                <div class="sticky-title pt-2 pr-2 pb-1">
                    <app-issue-entry [hideIssuelistNavigator]="false" [issueLookup]="issueLookup"
                        (showIssuelist)="showIssuelist = true"></app-issue-entry>
                </div>

                <button class="btn btn-link btn-sm pl-4" *ngIf="!organizationDetails" (click)="showOrganizationSetup = true">
                    <fa-icon icon="wrench" size="sm"></fa-icon> Organization purpose
                </button>

                <div *ngIf="treeNodes" class="pl-4 pb-5">
                    <p-contextMenu #cm [model]="menulist" appendTo="body"></p-contextMenu>
                    <p-tree [value]="treeNodes" selectionMode="single" (onNodeExpand)="loadNode($event)"
                        [(selection)]="selectedNode" (onNodeSelect)="nodeSelected($event)" [contextMenu]="cm"
                        (onNodeContextMenuSelect)="nodeContextMenuSelect($event.node)">
                        <ng-template let-node pTemplate="default">
                            <div style="font-size: 90%;" [ngClass]="{
                                        'small text-muted text-uppercase font-italic': checkIfCustomNode(node),
                                        'font-weight-bold': node.key === issueKey
                                }" [title]="getIssueTitle(node)">{{node.label}}</div>
                        </ng-template>
                        <ng-template let-node pTemplate="Heading">
                            <div [title]="getHeaderTitle(node)">{{node.label}}</div>
                        </ng-template>
                    </p-tree>
                </div>
            </as-split-area>

            <as-split-area size="80">
                <router-outlet></router-outlet>
            </as-split-area>
        </as-split>
    </div>
</div>

<p-sidebar [(visible)]="showIssuelist" styleClass="ui-sidebar-md" position="left">
    <app-issue-list (close)="this.showIssuelist = false">
    </app-issue-list>
</p-sidebar>

<p-sidebar [(visible)]="showProjectConfigSetup" styleClass="ui-sidebar-md" position="right">
    <app-project-config [project]="currentProject" (close)="projectConfigSetupCompleted($event)">
    </app-project-config>
</p-sidebar>

<p-sidebar [(visible)]="showOrganizationSetup" styleClass="ui-sidebar-md" position="right">
    <app-organization (close)="setupCompleted($event)"></app-organization>
</p-sidebar>

<p-sidebar [(visible)]="showHierarchyFieldSetup" styleClass="ui-sidebar-md" position="right">
    <app-hierarchy-field [hierarchyField]="hierarchyFieldPurpose" (close)="setupCompleted($event)">
    </app-hierarchy-field>
</p-sidebar>