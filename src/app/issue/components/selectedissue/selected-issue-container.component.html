<div class="bg-light container-fluid pb-1 border-bottom" *ngIf="selectedIssue">
    <div class="float-right btn-group btn-group-sm">
        <button class="btn btn-sm btn-link text-muted " (click)="toggleView()">
            <fa-icon [icon]="compactView ? 'expand-alt' : 'compress-alt'"></fa-icon>
        </button>
    </div>
    <nav aria-label="breadcrumb" *ngIf="!compactView">
        <ol class="breadcrumb small bg-light p-0 m-0">
            <li class="breadcrumb-item">
                <a [routerLink]="['/search/list']" class="text-uppercase">
                    <fa-icon icon="search" class="mr-1"></fa-icon> Results
                </a>
            </li>
            <li class="breadcrumb-item" *ngIf="primaryIssue && !primaryAndSelectIssueSame">
                <a [routerLink]="['/browse', primaryIssue.key]" class="text-uppercase">
                    {{primaryIssue.issueType}}: {{primaryIssue.key}}
                </a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
                <span class="text-uppercase text-dark">
                    {{selectedIssue.issueType}}: {{selectedIssue.key}}
                </span>

                <span class="badge text-truncate ml-2" [ngClass]="{'badge-success': selectedIssue.resolution, 
                'badge-warning':!selectedIssue.resolution && selectedIssue.duedateMissing,
                'badge-secondary':!selectedIssue.resolution && !selectedIssue.duedateMissing}">
                    {{selectedIssue.status}}
                </span>

                <app-issue-navigation-menu class="ml-3" [issueKey]="selectedIssue.key" [spread]="true">
                </app-issue-navigation-menu>

            </li>
        </ol>
    </nav>
    <uicontrols-textbox [text]="selectedIssue.title" styleClass="h2 font-weight-light mb-0 text-truncate"
        [canEdit]="!selectedIssue.resolution" (textUpdated)="onTitleUpdated($event)">
    </uicontrols-textbox>
    <!-- <h2 class="font-weight-light mb-0" [ngClass]="{'hover-container': !selectedIssue.resolution}" *ngIf="!editTitle">
        <button class="btn btn-link btn-sm hover-button float-right" (click)="onEditTitle()">
            <i class="fa fa-pencil-alt text-muted"></i>
        </button>
        {{selectedIssue.title}}
    </h2>
    <div class="input-group mb-1" *ngIf="editTitle">
        <input class="form-control" [appAutofocus]="editTitle" (keydown.enter)="onSaveTitle()"
            [(ngModel)]="titleMemento" (keydown.escape)="onCancelTitle($event)">
        <div class="input-group-append">
            <button class="btn btn-primary btn-sm" (click)="onSaveTitle()" [disabled]="!canSaveTitle()">
                <fa-icon icon="check" [fixedWidth]="true"></fa-icon>
            </button>
            <button class="btn btn-secondary btn-sm" (click)="onCancelTitle(null)">
                <fa-icon icon="times" [fixedWidth]="true"></fa-icon>
            </button>
        </div>
    </div> -->

    <div class="btn-group" *ngIf="!compactView">
        <a class="btn btn-default border btn-sm text-nowrap" [routerLink]="['details']" title="View purpose"
            [routerLinkActive]="'active'">
            <fa-icon icon="fire" size="sm" class="text-brand"></fa-icon>
            <span class=" ml-1">Purpose</span>
        </a>

        <!-- <a class="btn btn-default border btn-sm text-nowrap" routerLink="workbench" title="Workbench"
            [routerLinkActive]="'active'">
            <fa-icon [icon]="['far','window-restore']" size="sm"></fa-icon>
            <span class=" ml-1">Workbench</span>
        </a> -->

        <a class="btn btn-default border btn-sm text-nowrap" routerLink="storyboard" title="Storyboard"
            [routerLinkActive]="'active'" *ngIf="canNavigateToStoryboard">
            <fa-icon [icon]="['far', 'map']" size="sm"></fa-icon>
            <span class=" ml-1">Storyboard</span>
        </a>

        <a class="btn btn-default border btn-sm text-nowrap" routerLink="timeline" title="Timeline"
            [routerLinkActive]="'active'" *ngIf="canNavigateToStoryboard">
            <fa-icon icon="map-signs" size="sm"></fa-icon>
            <span class=" ml-1">Timeline</span>
        </a>
    </div>

</div>
<!-- <pre>{{selectedIssue | json}}</pre> -->
<div style="overflow: auto;width:100%;" #content [style.height.px]="contentHeight">
    <router-outlet></router-outlet>
</div>